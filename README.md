# Receipt Splitter (Frontend)

Фронтенд мобильного приложения для разбиения чеков на Expo + React Native. Проект собран на Expo Router, Zustand, React Query и Tamagui.

## Требования к окружению

- Node.js 18 или 20 (LTS). Лучше ставить через nvm (macOS/Linux) или nvm-windows (Windows), иначе скачайте с nodejs.org. После установки проверьте `node -v`.
- npm версии 9 и выше. Идет в комплекте с Node.js, проверяется командой `npm -v`.
- Expo CLI (минимум v7). Можно запускать через `npx`, но для удобства поставьте глобально.
- Git для работы с репозиторием.
- Expo Go на телефоне (iOS/Android) или эмулятор/симулятор, чтобы смотреть приложение локально.
- Для нативных сборок: Android Studio с SDK и настроенным эмулятором; Xcode (только macOS) для iOS.

> В корне есть `.npmrc`, поэтому `npm install` автоматически выполняется с флагом `--legacy-peer-deps`.

## Установка Expo CLI

```bash
npm install --global expo
expo --version
```

Если хотите обходиться без глобальной установки, используйте `npx expo <команда>`. Для сборок через EAS дополнительно поставьте `npm install --global eas-cli`.

## Клонирование и установка

```bash
git clone https://github.com/<your-org>/receipt-splitter-frontend.git
cd receipt-splitter-frontend
npm install
```

Установка зависимостей может занять несколько минут: Expo подтягивает нативные пакеты.

## Переменные окружения

Для локальной разработки нужен файл `.env`. В репозитории лежит рабочий вариант — убедитесь, что значения совпадают с продуктивными/стейджинг-настройками (адрес API, тайм-ауты, флаги отладки). Если файла нет или параметры устарели, запросите актуальные значения у команды инфраструктуры и создайте `.env` (или личный `.env.local`).

Для персональных overrides удобно завести копию:

```bash
cp .env .env.local
```

Expo автоматически подхватывает переменные, начинающиеся с `EXPO_PUBLIC_`.

## Запуск в режиме разработки

```bash
npm run start
```

После старта появится Expo Dev Server и Metro Bundler.

- Нажмите `a`, чтобы открыть приложение на Android-эмуляторе.
- Нажмите `i`, чтобы запустить iOS-симулятор (только macOS).
- Отсканируйте QR-код камерой в приложении Expo Go, чтобы открыть проект на физическом устройстве.
- Нажмите `w` или выполните `npm run web`, чтобы открыть веб-версию в браузере.

## Полезные команды

- `npm run android` запускает приложение на подключенном Android-устройстве или активном эмуляторе (Android Studio должна быть открыта).
- `npm run ios` собирает и ставит приложение в iOS-симулятор (macOS + Xcode).
- `npm run web` поднимает веб-бандлер (`expo start --web`).
- `npx expo start --clear` очищает кэш Metro/Expo, если появились странные ошибки.

## Структура проекта в двух словах

- `app/` содержит маршруты и экраны Expo Router.
- `src/` хранит бизнес-логику, стои, API-клиенты и утилиты.
- `assets/` включает шрифты и статические ресурсы.
- `app.json` и `eas.json` описывают конфигурацию Expo и EAS Build.

## Дополнительные рекомендации

1. Android: установите Android Studio, настройте AVD или включите USB-debugging на устройстве. После этого `npm run android` автоматически деплоит сборку.
2. iOS: откройте Xcode, в разделе Components скачайте нужные симуляторы. Команда `npm run ios` соберет проект и поставит его в выбранный симулятор.
3. EAS Build: для облачных сборок используйте `eas build` (требуется `npx expo login`). Настройки профилей смотрите в `eas.json`.

## Полезные ссылки

- https://docs.expo.dev/
- https://docs.expo.dev/router/introduction/
- https://reactnative.dev/docs/environment-setup
- https://tamagui.dev/docs/intro

Если появляются ошибки при установке или запуске, сначала обновите Node.js до актуальной LTS, затем повторно выполните `npm install` и `npm run start`. Подробности по взаимодействию с сервером смотрите в файлах `ARCHITECTURE.md` и `STATUS.yaml`.
